import{ay as b,j as e,I as f,T as d,az as y,B as g,aA as p}from"./index-BJrYkkbA.js";import{u as j}from"./useQuery-DFVQRQYW.js";import{u as C}from"./useSuspenseQuery-Cl9TM8fv.js";import{c as w,u as S,g as P,P as R}from"./paginated-table-NottqT0_.js";import"./side-panel-provider-DxsBlxMi.js";import{M as N}from"./main-CAAnIMo1.js";import{b as z}from"./breadcrumbs-for-path-DmZdZ2n2.js";import"./useBaseQuery-CDY4cYzC.js";import"./Table-79HwOb_A.js";import"./useToggleState-C9KbMpY2.js";import"./empty-list-C7hzuEv3.js";import"./select-B37njsdh.js";function E({snapshotId:t,path:o}){const s=C(y({snapshot:t})),n=z(s.data.item.identifier,s.data.item.sources[0].importer.directory,o);return e.jsxs(g,{children:[...n,e.jsx(g.Crumb,{to:"/snapshots/$snapshotId/errors",params:{snapshotId:t},children:"All errors"},"currentPath")]})}function I({snapshotId:t,path:o,page:s,perPage:n,onPageChange:u}){const r=j({...b({snapshotId:t,path:o,page:s,perPage:n})}),c=w(),l=[c.accessor("name",{header:()=>"Filename",meta:{cellClassName:"w-1/3"},cell:({row:a})=>e.jsxs("div",{className:"flex gap-2",children:[e.jsx(f,{type:"exclamation-circle",className:"text-error",size:"md"}),e.jsx(d,{weight:"medium",size:"md",className:"text-primary select-text break-all leading-none",children:a.original.name})]})}),c.accessor("error",{header:()=>"Error",cell:({row:a})=>e.jsx(d,{weight:"normal",className:"text-secondary select-text break-all",children:a.original.error})})],i={pageIndex:s,pageSize:n},h=S({data:r.data?.items??[],rowCount:r.data?.total,columns:l,state:{pagination:i},getRowId:(a,m)=>`row-${m}`,enableMultiRowSelection:!1,onPaginationChange:a=>{const m=typeof a=="function"?a(i):a;u(m.pageIndex,m.pageSize)},manualPagination:!0,getCoreRowModel:P()}),x=r.data?r.data.total==1?"1 error":`${r.data.total} errors`:"Errors";return e.jsx(N,{title:x,breadcrumb:e.jsx(E,{snapshotId:t,path:o}),children:e.jsx(R,{variant:"cards",query:r,table:h,ariaLabel:"Snapshot errors"})})}function _(){const{snapshotId:t}=p.useParams(),{path:o,page:s,per_page:n}=p.useSearch(),u=p.useNavigate(),r=(c,l)=>u({search:i=>({...i,page:i.per_page!==l?0:c,per_page:l})});return e.jsx(I,{snapshotId:t,path:o,page:s,perPage:n,onPageChange:r})}export{_ as component};
