import{ab as l,ac as i,j as a,ad as c,ae as u,af as m,T as d,ag as r,ah as h,a2 as b}from"./index-Aj8lmPfQ.js";import{u as g}from"./useSuspenseQuery-DpMyaBMz.js";import{M as p}from"./main-Ds-kxHfS.js";import"./useBaseQuery-CGDUSr1J.js";function f(){const n=g(c()),s=l.useNavigate(),t=i();return n.data.__type==="unauthenticated"?(s({to:"/login",search:{returnUrl:t.state.location.pathname}}),null):a.jsx(x,{alertingSettings:n.data.configuration})}function x({alertingSettings:n}){const s=u(),t=m({defaultValues:{enabled:n.enabled,email:n.email_report},onSubmit:e=>{s.mutate({enabled:e.value.enabled,email_report:e.value.email},{onError:o=>{t.reset(),b({content:{children:o.toString(),variant:"error"}})}})}});return a.jsx(p,{title:"Settings",children:a.jsxs("div",{className:"flex flex-col gap-4",children:[a.jsx(d,{weight:"medium",className:"text-secondary",children:"Alerting properties"}),a.jsxs("form",{onSubmit:e=>{e.preventDefault(),e.stopPropagation(),t.handleSubmit()},className:"flex flex-col gap-4",children:[a.jsx(t.Field,{name:"enabled",children:e=>a.jsx(r,{"aria-label":`${e.state.value?"Disable":"Enable"} alerting service at plakar.io`,title:a.jsxs(a.Fragment,{children:["Enable alerting service at"," ",a.jsx("strong",{className:"text-accent",children:"plakar.io"})]}),description:"Securely send concise task summaries to your account on our servers—your backup data stays on your side.",isSelected:e.state.value,onChange:e.handleChange,onBlur:e.handleBlur}),listeners:{onChange:t.handleSubmit}}),n.enabled&&a.jsx(t.Field,{name:"email",children:e=>a.jsx(r,{"aria-label":`${e.state.value?"Disable":"Receive"} alerts by email`,title:"Receive alerts by email",description:"Get issue notifications and weekly backup summaries—only metadata, never your actual data.",isSelected:e.state.value,onChange:e.handleChange,onBlur:e.handleBlur}),listeners:{onChange:t.handleSubmit}}),a.jsxs("div",{className:"flex items-start gap-2",children:[a.jsx(r,{"aria-label":"Enable alerting to custom webhook",title:"Enable alerting to custom webhook",description:"Send alerts to your own webhook URL for custom processing.",isDisabled:!0}),a.jsx(h,{variant:"brand",leftIcon:"bell",children:"Available soon"})]})]})]})})}export{f as component};
