import{Z as l,_ as o,j as a,a0 as i,a1 as u,a2 as c,T as m,a3 as r,m as d}from"./index-hfxJ9ND0.js";import{u as p}from"./useSuspenseQuery-CmTEEXGf.js";import"./side-panel-provider-DzwNjgZ0.js";import{M as b}from"./main-BHTg64jE.js";import"./useBaseQuery-CSwYJmhT.js";function S(){const n=p(i()),s=l.useNavigate(),t=o();return n.data.__type==="unauthenticated"?(s({to:"/login",search:{returnUrl:t.state.location.pathname}}),null):a.jsx(h,{alertingSettings:n.data.configuration})}function h({alertingSettings:n}){const s=u(),t=c({defaultValues:{enabled:n.enabled,email:n.email_report},onSubmit:e=>{s.mutate({enabled:e.value.enabled,email_report:e.value.email},{onError:()=>{t.reset()}})}});return a.jsx(b,{title:"Settings",children:a.jsxs("div",{className:"flex flex-col gap-4",children:[a.jsx(m,{weight:"medium",className:"text-secondary",children:"Alerting properties"}),a.jsxs("form",{onSubmit:e=>{e.preventDefault(),e.stopPropagation(),t.handleSubmit()},className:"flex flex-col gap-4",children:[a.jsx(t.Field,{name:"enabled",children:e=>a.jsx(r,{"aria-label":`${e.state.value?"Disable":"Enable"} alerting service at plakar.io`,title:a.jsxs(a.Fragment,{children:["Enable alerting service at"," ",a.jsx("strong",{className:"text-accent",children:"plakar.io"})]}),description:"Securely send concise task summaries to your account on our servers—your backup data stays on your side.",isSelected:e.state.value,onChange:e.handleChange,onBlur:e.handleBlur}),listeners:{onChange:t.handleSubmit}}),n.enabled&&a.jsx(t.Field,{name:"email",children:e=>a.jsx(r,{"aria-label":`${e.state.value?"Disable":"Receive"} alerts by email`,title:"Receive alerts by email",description:"Get issue notifications and weekly backup summaries—only metadata, never your actual data.",isSelected:e.state.value,onChange:e.handleChange,onBlur:e.handleBlur}),listeners:{onChange:t.handleSubmit}}),a.jsxs("div",{className:"flex items-start gap-2",children:[a.jsx(r,{"aria-label":"Enable alerting to custom webhook",title:"Enable alerting to custom webhook",description:"Send alerts to your own webhook URL for custom processing.",isDisabled:!0}),a.jsx(d,{variant:"brand",leftIcon:"bell",children:"Available soon"})]})]})]})})}export{S as component};
