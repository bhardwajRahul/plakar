import{j as e,ao as u,l as o,m as l,T as n,I as j,ap as y,aq as N,J as b}from"./index-hfxJ9ND0.js";import{A as I}from"./alert-CiGfdPyF.js";import{u as w}from"./useQuery--Ee6qBmG.js";function C({name:s="<name>",version:a="<version>",os:t="<os>",arch:r="<arch>"}){return e.jsxs(I,{title:"Login is required to install pre-built integrations",variant:"warning",actions:e.jsx(o,{variant:"secondary",href:{to:"/login",search:{returnUrl:"/integrations"}},children:"Login"}),children:[e.jsx("p",{children:"To make your life easier, we host pre-built integrations for various systems that can be installed in one click directly from the UI (login required)."}),e.jsx("p",{className:"mt-2",children:"Alternatively, you can build and install integrations manually with the CLI."}),e.jsx("div",{className:"mt-2",children:e.jsxs(u,{title:"Build & Install integration with the CLI",children:[e.jsx(u.Command,{prompt:"$ ",command:`plakar pkg build ${s}`}),e.jsx(u.Command,{prompt:"$ ",command:`plakar pkg add ./${s}_${a}_${t}_${r}.ptar`})]})})]})}function k({stage:s}){const t={stable:"green",testing:"blue",beta:"yellow",devel:"red"}[s]??"red";return e.jsx(l,{variant:t,size:"sm",children:s})}function q({icon:s,name:a,version:t,stage:r,installationStatus:i,types:m,tags:g,description:v,documentationProps:c,onInstall:x,onRemove:f,pending:d}){return e.jsxs("div",{className:"border-primary bg-primary flex flex-col gap-4 rounded-xl border p-4",children:[e.jsxs("div",{className:"flex gap-2",children:[s&&e.jsx("div",{className:"bg-tertiary h-11 w-11 shrink-0 rounded-lg p-2",children:e.jsx("img",{src:s,className:"h-full w-full object-cover object-center",alt:""})}),e.jsxs("div",{className:"flex flex-col gap-1",children:[e.jsx(n,{as:"h2",variant:"heading",weight:"medium",size:"sm",className:"text-primary break-all leading-none",children:a}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(n,{className:"text-tertiary break-all leading-none",children:t}),e.jsx(k,{stage:r})]})]}),(c!==void 0||i!=="not-installed")&&e.jsx("div",{className:"ml-auto",children:e.jsx(p,{status:i,onInstall:x,pending:d})})]}),e.jsxs("div",{className:"flex flex-col gap-3",children:[e.jsxs("div",{className:"flex flex-wrap gap-2",children:[m.storage&&e.jsx(l,{variant:"default",radius:"sqrt",children:"Storage"}),m.source&&e.jsx(l,{variant:"default",radius:"sqrt",children:"Source"}),m.destination&&e.jsx(e.Fragment,{children:e.jsx(l,{variant:"default",radius:"sqrt",children:"Destination"})}),g.map(h=>e.jsx(l,{variant:"transparent",radius:"rounded",children:h},h))]}),e.jsx(n,{className:"text-secondary overflow-auto",size:"sm",children:v})]}),e.jsxs("div",{className:"mt-auto flex gap-2 text-center",children:[c&&e.jsx(o,{variant:"secondary",className:"flex-1",...c,children:"Read documentation"}),!c&&i==="not-installed"&&e.jsx(p,{status:i,onInstall:x,pending:d}),i==="installed"&&e.jsx(o,{variant:"tertiary",className:"ml-auto",leftIcon:"trash",onPress:f,isDisabled:d,isPending:d,children:"Remove"})]})]})}function p({status:s,onInstall:a,pending:t}){return{installed:e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(j,{type:"success-circle",size:"md",className:"text-accent"}),e.jsx(n,{weight:"medium",size:"sm",className:"text-accent",children:"Installed"})]}),"not-installed":e.jsx(o,{leftIcon:"download",isDisabled:!a||t,onPress:a,isPending:t,className:"w-full",children:"Install"}),"built-in":e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(j,{type:"success-circle",size:"md",className:"text-accent"}),e.jsx(n,{weight:"medium",size:"sm",className:"text-accent",children:"Built-in"})]})}[s]}function R({integration:s,installDisabled:a=!1,...t}){const r=y(),i=N();return e.jsx(q,{icon:s.icon,name:s.display_name,version:s.latest_version,stage:s.stage,installationStatus:s.installation.status,types:{source:s.types.source,destination:s.types.destination,storage:s.types.storage},tags:s.tags,description:s.description,onInstall:!a&&s.installation.available?()=>{r.mutate({integrationId:s.id,version:s.latest_version})}:void 0,onRemove:()=>{i.mutate({integrationId:s.id})},pending:r.isPending||i.isPending,...t},s.id)}function T(){return{isAuthenticated:w(b()).data!==null}}export{C as I,R as a,T as u};
