import{ar as b,j as e,I as f,T as d,as as w,B as g,at as p}from"./index-hfxJ9ND0.js";import{u as y}from"./useQuery--Ee6qBmG.js";import{u as j}from"./useSuspenseQuery-CmTEEXGf.js";import{c as C,u as S,g as P,P as N}from"./paginated-table-B6jlOu_g.js";import"./side-panel-provider-DzwNjgZ0.js";import{M as R}from"./main-BHTg64jE.js";import{b as E}from"./breadcrumbs-for-path-2XV9zkte.js";import"./useBaseQuery-CSwYJmhT.js";import"./Table-WVLjXGgi.js";import"./empty-list-DT5Cphlr.js";import"./pagination-DmVTMMJU.js";function I({snapshotId:t,path:o}){const s=j(w({snapshot:t})),n=E(s.data.item.identifier,s.data.item.sources[0].importer.directory,o);return e.jsxs(g,{children:[...n,e.jsx(g.Crumb,{to:"/snapshots/$snapshotId/errors",params:{snapshotId:t},children:"All errors"},"currentPath")]})}function M({snapshotId:t,path:o,page:s,perPage:n,onPageChange:u}){const a=y({...b({snapshotId:t,path:o,page:s,perPage:n})}),m=C(),c=[m.accessor("name",{header:()=>"Filename",meta:{cellClassName:"min-w-80 md:min-w-none md:w-1/3"},cell:({row:r})=>e.jsxs("div",{className:"flex gap-2",children:[e.jsx(f,{type:"exclamation-circle",className:"text-error",size:"md"}),e.jsx(d,{weight:"medium",size:"md",className:"text-primary select-text break-all leading-none",children:r.original.name})]})}),m.accessor("error",{header:()=>"Error",meta:{cellClassName:"min-w-80 md:min-w-none"},cell:({row:r})=>e.jsx(d,{weight:"normal",className:"text-secondary select-text break-all",children:r.original.error})})],i={pageIndex:s,pageSize:n},h=S({data:a.data?.items??[],rowCount:a.data?.total,columns:c,state:{pagination:i},getRowId:(r,l)=>`row-${l}`,enableMultiRowSelection:!1,onPaginationChange:r=>{const l=typeof r=="function"?r(i):r;u(l.pageIndex,l.pageSize)},manualPagination:!0,getCoreRowModel:P()}),x=a.data?a.data.total==1?"1 error":`${a.data.total} errors`:"Errors";return e.jsx(R,{title:x,breadcrumb:e.jsx(I,{snapshotId:t,path:o}),children:e.jsx(N,{variant:"cards",query:a,table:h,ariaLabel:"Snapshot errors"})})}function _(){const{snapshotId:t}=p.useParams(),{path:o,page:s,per_page:n}=p.useSearch(),u=p.useNavigate(),a=(m,c)=>u({search:i=>({...i,page:i.per_page!==c?0:m,per_page:c})});return e.jsx(M,{snapshotId:t,path:o,page:s,perPage:n,onPageChange:a})}export{_ as component};
